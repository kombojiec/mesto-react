(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),o=n(5),r=n.n(o),i=(n(4),n(2)),u=n.p+"static/media/logo.c2821b38.svg",p=function(e){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__Logo"})})},l=n(6),d=n(7),h=new(function(){function e(t){Object(l.a)(this,e),this._cohort=t.cohort,this._authorization=t.authorization,this._url=t.url}return Object(d.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getUser",value:function(){var e=this;return fetch(this._url+"/users/me",{headers:{authorization:this._authorization}}).then((function(t){return e._checkResponse(t)}))}},{key:"setUser",value:function(e){var t=this;return fetch(this._url+"/users/me",{method:"PATCH",headers:{authorization:this._authorization,"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._checkResponse(e)}))}},{key:"getCards",value:function(){var e=this;return fetch(this._url+"/cards",{headers:{authorization:this._authorization}}).then((function(t){return e._checkResponse(t)}))}},{key:"addCard",value:function(e,t){var n=this;return fetch(this._url+"/cards",{method:"POST",headers:{authorization:this._authorization,"Content-type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return n._checkResponse(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch(this._url+"/cards/"+e,{method:"DELETE",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._url+"/cards/likes/"+e,{method:"PUT",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._url+"/cards/likes/"+e,{method:"DELETE",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then((function(e){return t._checkResponse(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch(this._url+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._authorization,"Content-type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}}]),e}())({id:"4ca33b1025ae9067ff8a99f8",cohort:"cohort-17",authorization:"41783898-48ae-4927-9db7-0ae982096860",url:"https://mesto.nomoreparties.co/v1/cohort-17"}),_=function(e){return Object(a.jsxs)("article",{className:"element",children:[Object(a.jsx)("img",{src:e.card.link,alt:e.card.name,className:"element__image",onClick:function(){e.onCardClick(e.card)}}),Object(a.jsxs)("div",{className:"element__description",children:[Object(a.jsx)("h2",{className:"element__title",children:e.card.name}),Object(a.jsxs)("div",{className:"element__like-group",children:[Object(a.jsx)("button",{className:"element__like",type:"button"}),Object(a.jsx)("p",{className:"element__like-counter",children:e.card.likes.length})]}),Object(a.jsx)("button",{className:"element__basket",type:"button"})]})]})},j=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],o=n[1],r=Object(s.useState)(""),u=Object(i.a)(r,2),p=u[0],l=u[1],d=Object(s.useState)(""),j=Object(i.a)(d,2),m=j[0],b=j[1],O=Object(s.useState)([]),f=Object(i.a)(O,2),x=f[0],N=f[1];return Object(s.useEffect)((function(){h.getUser().then((function(e){o(e.avatar),l(e.name),b(e.about)}))}),[]),Object(s.useEffect)((function(){h.getCards().then((function(e){N(e.map((function(e){return e})))}),[])}),[]),Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__items",children:[Object(a.jsx)("div",{className:"profile__avatar-wrap",onClick:e.onEditAvatar,children:Object(a.jsx)("img",{src:c,alt:p,className:"profile__avatar"})}),Object(a.jsx)("div",{className:"profile__info",children:Object(a.jsxs)("div",{className:"profile__author",children:[Object(a.jsxs)("div",{className:"profile__name-wrap",children:[Object(a.jsx)("h1",{className:"profile__name",children:p}),Object(a.jsx)("button",{className:"button profile__edit-button",type:"button",onClick:e.onEditProfile})]}),Object(a.jsx)("p",{className:"profile__business",children:m})]})})]}),Object(a.jsx)("button",{className:"profile__add-button",type:"button",onClick:e.onAddPlace})]}),Object(a.jsx)("section",{className:"elements",children:x.map((function(t){return Object(a.jsx)(_,{card:t,onCardClick:e.onCardClick},t._id)}))}),Object(a.jsx)("section",{className:"popup popup_remove",children:Object(a.jsxs)("form",{className:"popup__form ",children:[Object(a.jsx)("h2",{className:"popup__title popup__title_type_dark",children:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?"}),Object(a.jsx)("button",{className:"popup__button popup__button_remove",type:"button",children:"\u0414\u0430"}),Object(a.jsx)("button",{className:"popup__close popup__close_place_remove",type:"submit"})]})})]})},m=function(e){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},b=function(e){return Object(a.jsx)("section",{className:"popup popup_".concat(e.name," ").concat(e.isOpen&&"popup_opened"),onClick:e.onOutsideClose,children:Object(a.jsxs)("form",{action:"#",className:"popup__form",noValidate:!0,children:[Object(a.jsxs)("h2",{className:"popup__title",children:[e.title," "]}),e.children,Object(a.jsx)("button",{className:"popup__button",type:"submit",onSubmit:function(){return console.log("submit")},children:e.buttonName}),Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose})]})})},O=function(e){return e.card?Object(a.jsx)("section",{className:"popup popup_image popup_dark ".concat(e.card?"popup_opened":""),onClick:e.onOutsideClose,children:Object(a.jsxs)("figure",{className:"popup__figure",children:[Object(a.jsx)("img",{className:"popup__image",src:e.card.link,alt:e.card.name}),Object(a.jsx)("button",{className:"popup__close popup__close_place_image",type:"button",onClick:e.onClose}),Object(a.jsx)("figcaption",{className:"popup__figcaption",children:e.card.name})]})}):null};var f=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(!1),r=Object(i.a)(o,2),u=r[0],l=r[1],d=Object(s.useState)(!1),h=Object(i.a)(d,2),_=h[0],f=h[1],x=Object(s.useState)(null),N=Object(i.a)(x,2),v=N[0],k=N[1],g=function(){c(!1),l(!1),f(!1),k(null)},C=function(e){e.target===e.currentTarget&&g()};return Object(s.useEffect)((function(){var e=function(e){"Escape"===e.key&&g()};return(n||u||v||_)&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n,u,v,_]),Object(a.jsx)("div",{className:"App page",children:Object(a.jsxs)("div",{className:"page__container",children:[Object(a.jsx)(p,{}),Object(a.jsx)(j,{onEditAvatar:function(){return c(!0)},onEditProfile:function(){return l(!0)},onAddPlace:function(){return f(!0)},onCardClick:function(e){k(e)}}),Object(a.jsxs)(b,{isOpen:n,onClose:g,onOutsideClose:C,title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(a.jsx)("input",{type:"url",className:"popup__input popup__input_place_avatar",name:"avatar-sourse",id:"avatar-sourse",placeholder:"https://somewebsite.com/someimage.jpg",required:!0}),Object(a.jsx)("label",{className:"popup__input-error",htmlFor:"avatar-sourse",id:"avatar-sourse-error"})]}),Object(a.jsxs)(b,{isOpen:u,onClose:g,onOutsideClose:C,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"form_profile",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(a.jsx)("input",{type:"text",className:"popup__input popup__input_place_name",name:"name",id:"edit-name",minLength:"2",maxLength:"40",required:!0}),Object(a.jsx)("label",{className:"popup__input-error",htmlFor:"edit-name",id:"edit-name-error"}),Object(a.jsx)("input",{type:"text",className:"popup__input popup__input_place_business",name:"about",id:"edit-business",minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("label",{className:"popup__input-error",htmlFor:"edit-business",id:"edit-business-error"})]}),Object(a.jsxs)(b,{isOpen:_,onClose:g,onOutsideClose:C,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"form_card",buttonName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:[Object(a.jsx)("input",{type:"text",className:"popup__input popup__input_place_place-name",name:"card-name",id:"card-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("label",{className:"popup__input-error",htmlFor:"card-name",id:"card-name-error"}),Object(a.jsx)("input",{type:"url",className:"popup__input popup__input_place_source",name:"card-sourse",id:"card-sourse",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("label",{className:"popup__input-error",htmlFor:"card-sourse",id:"card-sourse-error"})]}),Object(a.jsx)(O,{card:v,onClose:g,onOutsideClose:C}),Object(a.jsx)(m,{})]})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),c(e),o(e)}))};r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(f,{})}),document.getElementById("root")),x()},4:function(e,t,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.b7b2cdb4.chunk.js.map